<!doctype html>
<html>
<head>
<title>COVID Incarcerated</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="../bootstrap.min.js"></script>
<link href="../bootstrap.min.css" rel="stylesheet">
<link href="../bootstrap-theme.min.css" rel="stylesheet">
<script type="text/javascript">

  var spData = null;
  function doData(json) {
      spData = json.feed.entry;
  }

  function drawChart(input) {
    var data = google.visualization.arrayToDataTable(input);

    var options = {
      title: 'Cases',
      legend: 'none',
      isStacked: true
    };

    var chart = new google.visualization.AreaChart(document.getElementById('chart_div'));

    chart.draw(data, options);
  }

  function readData() {
      var data = spData;
      var columns = new Array();

      var parsedData = new Array();

      dateFormatter = new google.visualization.DateFormat({pattern: "Y-MM-dd", timeZone: -2});

      var currentType = "";
      var tmp = [];
      var incarceratedArray = new Array();
      for(var r=0; r<data.length; r++) {
          var cell = data[r]["gs$cell"];
          var val = cell["$t"];
          if (cell.col==1){
            currentType = val;
          }
          if (cell.row==1){
            tmp.push(val);
          }
          if (cell.row>1 && cell.col==1 && tmp.length>0){
            incarceratedArray.push(tmp);
            tmp = [];
          }
          if (cell.row>1 && cell.col==2 && currentType=="Resident Cases"){
            tmp.push(dateFormatter.formatValue(new Date(Date.parse(val))));
          }
          else if (cell.row>1 && cell.col>2 && currentType=="Resident Cases"){
            tmp.push(parseInt(val));
          }
//          if (cell.row==1){
//            columns[cell.col] = {date: val, type: ""};
//          }
//          else if (cell.row==2){
//            columns[cell.col].type = val;
//          }
//          else{
//            if (cell.col==1){
//              parsedData[val] = new Array();
//            }
//            else{
//              parsedData[val][columns[cell.col]] = val;
//            }
//            //console.log(cell.row+" "+cell.col+" "+val);
//          }
      }
//      console.log(columns);
      console.log(incarceratedArray);
//      console.log(parsedData);

//      var incarceratedArray = new Array();
//
//      incarceratedArray.push(['Year', 'Type 1', 'Type 2']);
//      incarceratedArray.push(["2010", 7, 3]);
//      incarceratedArray.push(["2011", 8, 6]);
//      incarceratedArray.push(["2012", 12, 12]);

//      for(var key in yearData) {
//        var value = yearData[key];
//        incarceratedArray.push([key, value]);
//      }

      drawChart(incarceratedArray);
  }
  $(document).ready(function(){
      google.charts.load('current', {'packages':['corechart']});
      google.charts.setOnLoadCallback(readData);
  });
</script>

<script src="https://spreadsheets.google.com/feeds/cells/1NAxNw4f8CFbhKmjLm7SrHtLQVgJt5XXrukAslxzTyU0/1/public/full?alt=json-in-script&callback=doData"></script>

<link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css" rel="stylesheet">

<style type="text/css">


.myInput {
    background-position: 10px 12px; /* Position the search icon */
    background-repeat: no-repeat; /* Do not repeat the icon image */
    width: 50%; /* Full-width */
    font-size: 16px; /* Increase font-size */
    padding: 12px 20px 12px 40px; /* Add some padding */
    border: 1px solid #ddd; /* Add a grey border */
    margin-bottom: 12px; /* Add some space below the input */
}



<!--
</style>
<style type="text/css" media="print">
  form {display: none;}
</style>
</head>
<body style="width: 90%;margin: auto;">

  <br>
<a href="../">
  <span class="glyphicon glyphicon-home"></span>
</a>


<center><h3>COVID Incarcerated Maryland</h3></center>
<br>

<center>
<div id="chart_div" style="width: 100%; height: 300px;"></div>
</center>

<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>


</body>
</html>
